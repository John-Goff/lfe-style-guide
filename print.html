<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js lfe-pdp">

<head>
    <!-- Book generated using mdBook -->
    <meta charset="UTF-8">
    <title>The LFE Style Guide</title>
    
    <meta name="robots" content="noindex" />
    
    


    <!-- Custom HTML head -->
    


    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="description" content="Recommended styles and basic best practices when programming in LFE">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#ffffff" />

    <link rel="icon" href="favicon.svg">
    <link rel="shortcut icon" href="favicon.png">
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/general.css">
    <link rel="stylesheet" href="css/chrome.css">
    <link rel="stylesheet" href="css/print.css" media="print">

    <!-- Fonts -->
    <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
    
    <link rel="stylesheet" href="fonts/fonts.css">
    

    <!-- Highlight.js Stylesheets -->
    <link rel="stylesheet" href="highlight.css">
    <link rel="stylesheet" href="tomorrow-night.css">
    <link rel="stylesheet" href="ayu-highlight.css">

    <!-- Custom theme stylesheets -->
    
    <link rel="stylesheet" href="css/custom.css">
    

    
</head>

<body>
    <!-- Provide site root to javascript -->
    <script type="text/javascript">
        var path_to_root = "";
        var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "lfe-pdp" : "lfe-pdp";
    </script>

    <!-- Work around some values being stored in localStorage wrapped in quotes -->
    <script type="text/javascript">
        try {
            var theme = localStorage.getItem('mdbook-theme');
            var sidebar = localStorage.getItem('mdbook-sidebar');

            if (theme.startsWith('"') && theme.endsWith('"')) {
                localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
            }

            if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
            }
        } catch (e) { }
    </script>

    <!-- Set the theme before any content is loaded, prevents flash -->
    <script type="text/javascript">
        var theme;
        try { theme = localStorage.getItem('mdbook-theme'); } catch (e) { }
        if (theme === null || theme === undefined) { theme = default_theme; }
        var html = document.querySelector('html');
        html.classList.remove('no-js')
        html.classList.remove('lfe-pdp')
        html.classList.add(theme);
        html.classList.add('js');
    </script>

    <!-- Hide / unhide sidebar before it is displayed -->
    <script type="text/javascript">
        var html = document.querySelector('html');
        var sidebar = 'hidden';
        if (document.body.clientWidth >= 1080) {
            try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch (e) { }
            sidebar = sidebar || 'visible';
        }
        html.classList.remove('sidebar-visible');
        html.classList.add("sidebar-" + sidebar);
    </script>

    <nav id="sidebar" class="sidebar" aria-label="Table of contents">
        <div class="sidebar-scrollbox">
            <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">The LFE Style Guide</a></li><li class="chapter-item expanded affix "><a href="title.html">Title Page</a></li><li class="chapter-item expanded affix "><a href="copyright.html">Copyright</a></li><li class="chapter-item expanded affix "><a href="preface.html">Preface</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="intro/index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="format/index.html"><strong aria-hidden="true">2.</strong> Formatting</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="format/line-len.html"><strong aria-hidden="true">2.1.</strong> Line Length</a></li><li class="chapter-item expanded "><a href="format/spelling.html"><strong aria-hidden="true">2.2.</strong> Spelling and Abbreviations</a></li></ol></li><li class="chapter-item expanded "><a href="names/index.html"><strong aria-hidden="true">3.</strong> Naming</a></li><li class="chapter-item expanded "><a href="docs/index.html"><strong aria-hidden="true">4.</strong> Documentation</a></li><li class="chapter-item expanded "><a href="repr/index.html"><strong aria-hidden="true">5.</strong> Data Representation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="repr/records.html"><strong aria-hidden="true">5.1.</strong> Records</a></li></ol></li><li class="chapter-item expanded "><a href="errors/index.html"><strong aria-hidden="true">6.</strong> Errors</a></li><li class="chapter-item expanded "><a href="psm/index.html"><strong aria-hidden="true">7.</strong> Processes, Servers and Messages</a></li><li class="chapter-item expanded "><a href="swe/index.html"><strong aria-hidden="true">8.</strong> Software Engineering</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="swe/principles.html"><strong aria-hidden="true">8.1.</strong> Principles</a></li><li class="chapter-item expanded "><a href="swe/priorities.html"><strong aria-hidden="true">8.2.</strong> Priorities</a></li><li class="chapter-item expanded "><a href="swe/architecture.html"><strong aria-hidden="true">8.3.</strong> Architecture</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="feedback.html">Feedback</a></li><li class="chapter-item expanded affix "><a href="redirects/docs.html">LFE Documentation</a></li><li class="chapter-item expanded affix "><a href="redirects/rebar3.html">LFE rebar3 Plugin</a></li><li class="chapter-item expanded affix "><a href="redirects/mdbook.html">Built with mdBook</a></li></ol>
        </div>
        <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
    </nav>

    <div id="page-wrapper" class="page-wrapper">

        <div class="page">
            
            <div id="menu-bar-hover-placeholder"></div>
            <div id="menu-bar" class="menu-bar sticky bordered">
                <div class="left-buttons">
                    <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents"
                        aria-label="Toggle Table of Contents" aria-controls="sidebar">
                        <i class="fa fa-bars"></i>
                    </button>
                    <button id="theme-toggle" class="icon-button" type="button" title="Change theme"
                        aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                        <i class="fa fa-paint-brush"></i>
                    </button>
                    <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                        <li role="none"><button role="menuitem" class="theme"
                                id="lfe-pdp">LFE PDP</button></li>
                        <li role="none"><button role="menuitem" class="theme"
                                id="light">Light</button></li>
                        <li role="none"><button role="menuitem" class="theme"
                                id="rust">Rust</button></li>
                        <li role="none"><button role="menuitem" class="theme"
                                id="coal">Coal</button></li>
                        <li role="none"><button role="menuitem" class="theme"
                                id="navy">Navy</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button>
                        </li>
                    </ul>
                    
                    <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)"
                        aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S"
                        aria-controls="searchbar">
                        <i class="fa fa-search"></i>
                    </button>
                    
                </div>

                <h1 class="menu-title">The LFE Style Guide</h1>

                <div class="right-buttons">
                    <a href="print.html" title="Print this book" aria-label="Print this book">
                        <i id="print-button" class="fa fa-print"></i>
                    </a>
                    
                    <a href="https://github.com/cnbbooks/lfe-style-guide" title="Git repository" aria-label="Git repository">
                        <i id="git-repository-button" class="fa fa-github"></i>
                    </a>
                    
                </div>
            </div>

            
            <div id="search-wrapper" class="hidden">
                <form id="searchbar-outer" class="searchbar-outer">
                    <input type="search" name="search" id="searchbar" name="searchbar"
                        placeholder="Search this book ..." aria-controls="searchresults-outer"
                        aria-describedby="searchresults-header">
                </form>
                <div id="searchresults-outer" class="searchresults-outer hidden">
                    <div id="searchresults-header" class="searchresults-header"></div>
                    <ul id="searchresults">
                    </ul>
                </div>
            </div>
            

            <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
            <script type="text/javascript">
                document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                Array.from(document.querySelectorAll('#sidebar a')).forEach(function (link) {
                    link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                });
            </script>

            <div id="content" class="content">
                <main>
                    <p><a href="images/cover-large.jpg"><img src="images/cover.jpg" alt="" /></a></p>
<!-- Named page links below: /-->
<h1><a class="header" href="#the-lfe-style-guide" id="the-lfe-style-guide">The LFE Style Guide</a></h1>
<br/>
<br/>
<br/>
<br/>
<br/>
<p>Adatped from multiple sources
<br/>
by Duncan McGreggor</p>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<p><a href="http://cnbb.pub/"><img src="images/cnbb-pub-logo-1.6.png" alt="publisher logo" /></a></p>
<!-- Named page links below: /-->
<p>Published by Cowboys 'N' Beans Books</p>
<p><a href="https://github.com/cnbbooks">https://github.com/cnbbooks</a> ◈ <a href="http://cnbb.pub/">http://cnbb.pub/</a> ◈ <a href="mailto:info@cnbb.pub">info@cnbb.pub</a></p>
<br/>
<br/>
<br/>
<p>First electronic edition published: 2013</p>
<p>Second electronic edition published: 2020</p>
<br/>
<br/>
<br/>
<p>Portions © 1992, 1993 Peter Norvig</p>
<p>Portions © 1992, 1993 Kent Pitman</p>
<p>Portions © 2013-2020, Duncan McGreggor</p>
<p>This work is licensed under a <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a></p>
<p><a href="http://creativecommons.org/licenses/by-sa/4.0/"><img src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" alt="Creative Commons License" /></a></p>
<br/>
<br/>
<br/>
<p>Cover art: Original version from <a href="https://archive.org/details/bitsavers_decpdp8focogrammingManual1968_2885139">1968 DEC FOCAL Programming Manual</a> with stylised PDP-8 as the dominant cover graphic. Adaptation of the original as a spoof and homage was made in 2015 by Duncan McGreggor.</p>
<h1><a class="header" href="#preface" id="preface">Preface</a></h1>
<p>The LFE Style Guide takes inspirection (and often times actual content) directly from key sources in the Lisp, Erlang, and even Clojure developer communities. These are as follows</p>
<ul>
<li><a href="https://google.github.io/styleguide/lispguide.xml">Google Common Lisp Style Guide</a></li>
<li><a href="https://lisp-lang.org/style-guide/">A Guide to Writing Good, Maintainable Common Lisp Code</a></li>
<li><a href="http://norvig.com/luv-slides.ps">Tutorial on Good Lisp Programming Style</a></li>
<li><a href="http://www.erlang.se/doc/programming_rules.shtml">Erlang Programming Rules and Conventions</a></li>
<li><a href="https://github.com/inaka/erlang_guidelines">Erlang Coding Standards &amp; Guidelines</a></li>
<li><a href="https://github.com/bbatsov/clojure-style-guide">The Clojure Style Guide</a></li>
<li><a href="https://stuartsierra.com/2016/clojure-how-to-ns.html">How to ns</a></li>
</ul>
<p>Note, however, that these are not considered sacrosanct sources of ultimate truth; (and neither is this guide). Instead, they contain practices that we have either adopted as-is, modified to some extent, or simply rejected (e.g., due to prior conventions established in MACLISP and LMI Lisp, their inapploicabliity due to LFE's unique status as a Lisp <em>and</em> Erlang dialect, etc.).</p>
<p>In geneeral we suggest following the LFE style as outlined here if you are creating a new project. If you are contributing to a project maintained by someonoe in the community, we recommend consistency: using the style adopted by <em>that</em> project (for any contributions to that project).</p>
<p>Above all, enjoy the parenthesis.</p>
<h1><a class="header" href="#introduction" id="introduction">Introduction</a></h1>
<h1><a class="header" href="#formatting" id="formatting">Formatting</a></h1>
<h1><a class="header" href="#line-length" id="line-length">Line Length</a></h1>
<p>You should format source code so that no line is longer than 80 characters.</p>
<p>Old text terminals were standardized on 80 columns which they in turn inherited from even older punch card technology. While modern computer screens support vastly more than this, there are a couple of considerations to keep in mind that motivate us to continue supporting an 80 character limit:</p>
<ul>
<li>Displaying code in web pages, paste-bins, gist services, etc., is much cleaner and easier to read when the character width is limited to 80 characters.</li>
<li>Most modern text editors allow for multiple panes, allowing several files to be open side-by-side, supporting the easy editing and referencing of multiple files simultaneously; limiting these files to 80 characters in width facilitates this type of workflow.</li>
<li>Code that has to be examined under emergency circumstances (such as via a terminal attached to a crash cart in a data center, or in an emergency shell session without a graphical window manager) is much easier to read quickly when character width is limited to 80.</li>
<li>Lastly, such a convention encourages good naming discipline!</li>
</ul>
<h1><a class="header" href="#spelling-and-abbreviations" id="spelling-and-abbreviations">Spelling and Abbreviations</a></h1>
<p>Use correct spelling in your comments, and most importantly in your identifiers. The LFE documentation projects (books and reference materials) use <code>aspell</code> and include <code>make</code> targets for running various spell-checking tasks across the project files. Feel free to borrow from these for your own projects.</p>
<p>Use common and domain-specific abbreviations, and must be consistent with these abbreviations. You may abbreviate lexical variables of limited scope in order to avoid overly-long symbol names.</p>
<p>If you're not sure, consult a dictionary, look up alternative spellings in a dictionary, or ask a local expert.</p>
<p>Here are examples of choosing the correct spelling:</p>
<ul>
<li>Use &quot;complimentary&quot; in the sense of a meal or beverage that is not paid for by the recipient, not &quot;complementary&quot;.</li>
<li>Use &quot;existent&quot; and &quot;nonexistent&quot;, not &quot;existant&quot;. Use &quot;existence&quot;, not &quot;existance&quot;.</li>
<li>Use &quot;hierarchy&quot; not &quot;heirarchy&quot;.</li>
<li>Use &quot;precede&quot; not &quot;preceed&quot;.</li>
<li>Use &quot;weird&quot;, not &quot;wierd&quot;.</li>
</ul>
<p>Make appropriate exceptions for industry standard nomenclature/jargon, including plain misspellings. For instance:</p>
<ul>
<li>Use &quot;referer&quot;, not &quot;referrer&quot;, in the context of the HTTP protocol.</li>
</ul>
<h1><a class="header" href="#naming" id="naming">Naming</a></h1>
<h1><a class="header" href="#documentation" id="documentation">Documentation</a></h1>
<h1><a class="header" href="#data-representation" id="data-representation">Data Representation</a></h1>
<h1><a class="header" href="#records" id="records">Records</a></h1>
<h1><a class="header" href="#errors" id="errors">Errors</a></h1>
<h1><a class="header" href="#processes-servers-and-messages" id="processes-servers-and-messages">Processes, Servers and Messages</a></h1>
<h1><a class="header" href="#software-engineering" id="software-engineering">Software Engineering</a></h1>
<h1><a class="header" href="#principles" id="principles">Principles</a></h1>
<p>There are some basic principles for team software development that every developer must keep in mind. Whenever the detailed guidelines are inadequate, confusing or contradictory, refer back to these principles for guidance:</p>
<ul>
<li>Every developer's code must be easy for another developer to read, understand, and modify — even if the first developer isn't around to explain it. (This is the &quot;hit by a truck&quot; principle.)</li>
<li>Everybody's code should look the same. Ideally, there should be no way to look at lines of code and recognize it as &quot;Alice's code&quot; by its style.</li>
<li>Be precise.</li>
<li>Be concise.</li>
<li>Keep it simple.</li>
<li>Use the smallest hammer for the job.</li>
<li>Use common sense.</li>
<li>Keep related code together. Minimize the amount of jumping around someone has to do to understand an area of code.</li>
</ul>
<h1><a class="header" href="#priorities" id="priorities">Priorities</a></h1>
<p>When making decisions about how to write a given piece of code, aim for the following -ilities in this priority order:</p>
<ul>
<li>Usability by the customer</li>
<li>Debuggability/Testability</li>
<li>Readability/Comprehensibility</li>
<li>Extensibility/Modifiability</li>
<li>Efficiency (of the LFE code at runtime)</li>
</ul>
<p>Most of these are obvious.</p>
<p>Usability by the customer means that the system has to do what the customer requires; it has to handle the customer's transaction volumes, uptime requirements; etc.</p>
<p>For the LFE efficiency point, given two options of equivalent complexity, pick the one that performs better. (This is often the same as the one that conses less, i.e. allocates less storage from the heap.)</p>
<p>Given two options where one is more complex than the other, pick the simpler option and revisit the decision only if profiling shows it to be a performance bottleneck.</p>
<p>However, avoid premature optimization. Don't add complexity to speed up something that runs rarely, since in the long run, it matters less whether such code is fast.</p>
<h1><a class="header" href="#architecture" id="architecture">Architecture</a></h1>
<p>To build code that is robust and maintainable, it matters a lot how the code is divided into components, how these components communicate, how changes propagate as they evolve, and more importantly how the programmers who develop these components communicate as these components evolve.</p>
<p>If your work affects other groups, might be reusable across groups, adds new components, has an impact on other groups (including QA or Ops), or otherwise isn't purely local, you must write it up using at least a couple of paragraphs, and get a design approval from the other parties involved before starting to write code — or be ready to scratch what you have when they object.</p>
<p>If you don't know or don't care about these issues, ask someone who does.</p>
<h1><a class="header" href="#feedback" id="feedback">Feedback</a></h1>
<meta http-equiv="refresh" content="0; URL=http://docs.lfe.io/" />
<meta http-equiv="refresh" content="0; URL=https://lfe-rebar3.github.io/" />
<meta http-equiv="refresh" content="0; URL=https://github.com/rust-lang/mdbook/" />

                </main>

                <nav class="nav-wrapper" aria-label="Page navigation">
                    <!-- Mobile navigation buttons -->
                    

                    

                    <div style="clear: both"></div>
                </nav>
            </div>
        </div>

        <nav class="nav-wide-wrapper" aria-label="Page navigation">
            

            
        </nav>

    </div>

    

    
    <!-- Google Analytics Tag -->
    <script type="text/javascript">
        var localAddrs = ["localhost", "127.0.0.1", ""];

        // make sure we don't activate google analytics if the developer is
        // inspecting the book locally...
        if (localAddrs.indexOf(document.location.hostname) === -1) {
            (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-38274766-4', 'auto');
            ga('send', 'pageview');
        }
    </script>
    

    

    
    <script type="text/javascript">
        window.playground_copyable = true;
    </script>
    

    

    
    <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
    

    <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
    <script src="book.js" type="text/javascript" charset="utf-8"></script>

    <!-- Custom JS scripts -->
    

    
    
    <script type="text/javascript">
        window.addEventListener('load', function () {
            window.setTimeout(window.print, 100);
        });
    </script>
    
    

</body>

</html>
